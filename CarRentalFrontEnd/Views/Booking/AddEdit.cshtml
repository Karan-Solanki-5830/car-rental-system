@model CarRentalFrontEnd.Models.BookingModel

@{
    ViewBag.Title = Model.BookingId == 0 ? "Add Booking" : "Edit Booking";
}

<div class="dashboard-card mb-4">
    <div class="card-header">
        <h2 class="card-title">@ViewBag.Title</h2>
    </div>
    
    <div class="card-body p-4">
        @if (ViewBag.ErrorMessage != null)
        {
            <div class="alert alert-danger bg-danger bg-opacity-10 text-danger border border-danger border-opacity-25 rounded-3 p-3 mb-4">
                <i class="fas fa-exclamation-circle me-2"></i>@ViewBag.ErrorMessage
            </div>
        }

        <form method="post" asp-action="AddEdit">
            <input type="hidden" asp-for="BookingId" />
            <input type="hidden" asp-for="Created" />


            <div class="row">
                <div class="col-md-6 mb-4">
                    <label asp-for="CustomerId" class="form-label text-muted">Customer</label>
                    <div class="input-group">
                        <span class="input-group-text bg-dark border-secondary">
                            <i class="fas fa-user text-muted"></i>
                        </span>
                        <select asp-for="CustomerId" class="form-control bg-dark text-light border-secondary"
                                asp-items="@(new SelectList(ViewBag.Customers, "CustomerId", "FullName"))">
                            <option value="">-- Select Customer --</option>
                        </select>
                    </div>
                    <span asp-validation-for="CustomerId" class="text-danger small mt-1"></span>
                </div>

                <div class="col-md-6 mb-4">
                    <label asp-for="VehicleId" class="form-label text-muted">Vehicle</label>
                    <div class="input-group">
                        <span class="input-group-text bg-dark border-secondary">
                            <i class="fas fa-car text-muted"></i>
                        </span>
                        <select asp-for="VehicleId" class="form-control bg-dark text-light border-secondary">
                            <option value="">-- Select Vehicle --</option>
                            @if (ViewBag.Vehicles != null)
                            {
                                foreach (var vehicle in (List<CarRentalFrontEnd.Models.VehicleModel>)ViewBag.Vehicles)
                                {
                                    <option value="@vehicle.VehicleId">Model = @vehicle.Model | Brand = @vehicle.Brand</option>
                                }
                            }
                        </select>
                    </div>
                    <span asp-validation-for="VehicleId" class="text-danger small mt-1"></span>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-4">
                    <label asp-for="StartDateTime" class="form-label text-muted">Start Date & Time</label>
                    <div class="input-group">
                        <span class="input-group-text bg-dark border-secondary">
                            <i class="fas fa-calendar-plus text-muted"></i>
                        </span>
                        <input asp-for="StartDateTime" class="form-control bg-dark text-light border-secondary" type="datetime-local" />
                    </div>
                    <span asp-validation-for="StartDateTime" class="text-danger small mt-1"></span>
                </div>

                <div class="col-md-6 mb-4">
                    <label asp-for="EndDateTime" class="form-label text-muted">End Date & Time</label>
                    <div class="input-group">
                        <span class="input-group-text bg-dark border-secondary">
                            <i class="fas fa-calendar-minus text-muted"></i>
                        </span>
                        <input asp-for="EndDateTime" class="form-control bg-dark text-light border-secondary" type="datetime-local" />
                    </div>
                    <span asp-validation-for="EndDateTime" class="text-danger small mt-1"></span>
                </div>
            </div>

            <div class="mb-4">
                <label asp-for="Status" class="form-label text-muted">Status</label>
                <div class="input-group">
                    <span class="input-group-text bg-dark border-secondary">
                        <i class="fas fa-tag text-muted"></i>
                    </span>
                    <select asp-for="Status" class="form-control bg-dark text-light border-secondary">
                        <option value="">-- Select Status --</option>
                        <option value="Pending">Pending</option>
                        <option value="Confirmed">Confirmed</option>
                        <option value="Cancelled">Cancelled</option>
                        <option value="Completed">Completed</option>
                    </select>
                </div>
                <span asp-validation-for="Status" class="text-danger small mt-1"></span>
            </div>

            <div class="d-flex gap-2 mt-4">
                <button type="submit" class="btn btn-success">
                    <i class="fas fa-save me-2"></i>Save
                </button>
                <a class="btn btn-secondary" href="@Url.Action("Index")">
                    <i class="fas fa-arrow-left me-2"></i>Back
                </a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
