@model List<CarRentalFrontEnd.Models.VehicleModel>
@{ var isAdmin = User.IsInRole("Admin"); }

@if (Model != null && Model.Any())
{
    foreach (var vehicle in Model)
    {
        <tr>
            <td>
                <div class="d-flex align-items-center">
                    <i class="fas fa-car text-muted me-2"></i>
                    <span>@vehicle.Brand</span>
                </div>
            </td>
            <td>@vehicle.Model</td>
            <td>
                <div class="d-flex align-items-center">
                    <i class="fas fa-calendar-alt text-muted me-2"></i>
                    <span>@vehicle.Year</span>
                </div>
            </td>
            <td class="text-nowrap">
                <div class="d-flex align-items-center">
                    <i class="fas fa-id-card text-muted me-2"></i>
                    <span>@vehicle.PlateNumber</span>
                </div>
            </td>
            <td class="text-center">
                @if (vehicle.Status == "Available")
                {
                    <span class="badge" style="background-color: rgba(16, 185, 129, 0.2); color: #10b981; border: 1px solid rgba(16, 185, 129, 0.3); padding: 5px 10px;">
                        <i class="fas fa-check-circle me-1"></i> Available
                    </span>
                }
                else if (vehicle.Status == "Rented")
                {
                    <span class="badge" style="background-color: rgba(245, 158, 11, 0.2); color: #f59e0b; border: 1px solid rgba(245, 158, 11, 0.3); padding: 5px 10px;">
                        <i class="fas fa-clock me-1"></i> Rented
                    </span>
                }
                else if (vehicle.Status == "Maintenance")
                {
                    <span class="badge" style="background-color: rgba(59, 130, 246, 0.2); color: #3b82f6; border: 1px solid rgba(59, 130, 246, 0.3); padding: 5px 10px;">
                        <i class="fas fa-tools me-1"></i> Maintenance
                    </span>
                }
                else
                {
                    <span class="badge" style="background-color: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); padding: 5px 10px;">
                        <i class="fas fa-ban me-1"></i> @vehicle.Status
                    </span>
                }
            </td>
            <td class="text-end">
                <div class="d-flex align-items-center justify-content-end">
                    <i class="fas fa-tachometer-alt text-muted me-2"></i>
                    <span>@string.Format("{0:N0}", vehicle.Mileage)</span>
                </div>
            </td>
            <td class="text-end">
                <div class="d-flex align-items-center justify-content-end">
                    <span>@string.Format(System.Globalization.CultureInfo.CurrentCulture, "{0:C}", vehicle.PricePerDay)</span>
                </div>
            </td>

            @if (isAdmin){
            <td class="text-nowrap">
                <div class="d-flex align-items-center">
                    <i class="fas fa-calendar-plus text-muted me-2"></i>
                    <span>@(vehicle.Created?.ToString("yyyy-MM-dd") ?? "-")</span>
                </div>
            </td>
            }
            @if (isAdmin) {
                <td class="text-end">
                    <div class="d-flex gap-2 justify-content-end">
                        <a href="@Url.Action("AddEdit", "Vehicle", new { id = vehicle.VehicleId })"
                           class="btn btn-sm" style="background: rgba(245, 158, 11, 0.2); color: #f59e0b; border: 1px solid rgba(245, 158, 11, 0.3);">
                            <i class="fas fa-edit"></i>
                        </a>
                        <a href="@Url.Action("Delete", "Vehicle", new { id = vehicle.VehicleId })"
                           onclick="return confirm('Are you sure you want to delete this vehicle?')"
                           class="btn btn-sm" style="background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3);">
                            <i class="fas fa-trash-alt"></i>
                        </a>
                    </div>
                </td>
            }
        </tr>
    }
}
else
{
    <tr>
        <td colspan="9" class="text-center">No vehicles found.</td>
    </tr>
}
